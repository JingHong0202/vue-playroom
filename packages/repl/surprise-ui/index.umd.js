(function(u,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(u=typeof globalThis<"u"?globalThis:u||self,e(u.surprise_ui={},u.Vue))})(this,function(u,e){"use strict";const G="",x=["data-type","data-plain","disabled"],$=e.defineComponent({name:"su-button"}),M=e.defineComponent({...$,props:{type:{default:""},customStyle:{},label:{},disabled:{type:Boolean,default:!1},plain:{type:Boolean,default:!1},round:{type:Boolean,default:!1}},emits:["onClick"],setup(l,{emit:o}){return(n,t)=>(e.openBlock(),e.createElementBlock("button",{class:e.normalizeClass(["su-button",{round:n.round}]),"data-type":n.type,"data-plain":n.plain,style:e.normalizeStyle(n.customStyle),onClick:t[0]||(t[0]=a=>o("onClick")),disabled:n.disabled},[e.renderSlot(n.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(n.label),1)],!0)],14,x))}}),J="",b=(l,o)=>{const n=l.__vccOpts||l;for(const[t,a]of o)n[t]=a;return n},I=b(M,[["__scopeId","data-v-3805931b"]]),S=l=>(l.install=o=>{const n=l.name;n&&o.component(n,l)},l),B=S(I);function w({props:l,wrapElement:o,mode:n="vertical"}){const t=e.ref([]),a=n=="vertical"?{startKey:"__top",endKey:"__bottom",attrName:"height"}:{startKey:"__left",endKey:"__right",attrName:"width"},_=e.computed(()=>t.value[t.value.length-1]&&t.value[t.value.length-1][a.endKey]),s=e.computed(()=>{const r=o.value?.[n==="vertical"?"clientHeight":"clientWidth"]??0;return Math.ceil(r/l.itemSize)}),i=e.computed(()=>Math.min(c.value,Math.round(l.buffer*s.value))),m=e.computed(()=>Math.min(t.value.length-d.value,Math.round(l.buffer*s.value))),y=e.computed(()=>{const r=c.value-i.value,p=d.value+m.value;return t.value.slice(r,p+1)}),c=e.ref(0),d=e.computed(()=>c.value+s.value),g=e.computed(()=>{if(c.value>=1){const r=t.value[c.value][a.startKey]-(t.value[c.value-i.value]?t.value[c.value-i.value][a.startKey]:0);return t.value[c.value-1][a.endKey]-r}else return 0});e.watchEffect(()=>{t.value=l.data?.length?l.data.map((r,p)=>({...r,...f(+p)})):[]}),e.onUpdated(()=>{const r=o.value?.querySelectorAll(".virtual-list-container > .virtual-item");r!==void 0&&e.nextTick(()=>{for(let p=0;p<r.length;p++){const K=r[p],N=K.getBoundingClientRect(),h=+K.getAttribute("_id"),W=t.value[h].__size,z=W-N[a.attrName];if(z){t.value[h].__size=N[a.attrName],t.value[h][a.endKey]=t.value[h][a.endKey]-z;for(let v=h+1;v<t.value.length;v++){const k=t.value[v];k[a.startKey]=t.value[v-1][a.endKey],k[a.endKey]=k[a.endKey]-z}}}})});function f(r){return n==="vertical"?{__size:l.itemSize,__bottom:(r+1)*l.itemSize,__top:r*l.itemSize,__index:r}:{__size:l.itemSize,__right:(r+1)*l.itemSize,__left:r*l.itemSize,__index:r}}return{_data:t,placeholderHeight:_,visibleCount:s,visibleData:y,startIndex:c,endIndex:d,startOffset:g}}function V(l,o,n){let t=0,a=l.length-1,_=null;const s=n==="vertical"?"__bottom":"__right";for(;t<=a;){const i=t+(a-t>>1);if(l[i][s]>o)(_===null||_>i)&&(_=i),a=i-1;else if(l[i][s]<o)t=i+1;else if(l[i][s]===o)return l[i].__index+1}return _}const L=["onScroll"],O=["_id"],T=e.defineComponent({name:"horizonetal-virtual-list"}),H=e.defineComponent({...T,props:{data:{default:()=>[]},itemSize:{default:0},buffer:{default:0},keyName:{default:""}},setup(l,{expose:o}){const n=l,t=e.ref(),{_data:a,visibleData:_,startIndex:s,startOffset:i,placeholderHeight:m}=w({props:n,wrapElement:t,mode:"horizontal"});o({reset:c,container:t,_data:a});function y(){const d=t.value.scrollLeft;s.value=V(a.value,d,"horizonetal")}function c(){s.value=0,t.value?.scroll({top:0,left:0})}return(d,g)=>(e.openBlock(),e.createElementBlock("div",{class:"virtual-list-wrap",ref_key:"wrap",ref:t,onScroll:e.withModifiers(y,["prevent","stop"])},[e.createElementVNode("div",{class:"virtual-list-placeholder",style:e.normalizeStyle({width:e.unref(m)+"px"})},null,4),e.createElementVNode("div",{class:"virtual-list-container",style:e.normalizeStyle({transform:`translate3d(${e.unref(i)}px,0,0)`})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(_),f=>(e.openBlock(),e.createElementBlock("div",{class:"virtual-item",_id:f.__index,key:f[n.keyName]},[e.renderSlot(d.$slots,"default",{slotScope:f},void 0,!0)],8,O))),128))],4)],40,L))}}),Q="",j=b(H,[["__scopeId","data-v-a7541527"]]),D=["onScroll"],P=["_id"],q=e.defineComponent({name:"vertical-virtual-list"}),A=e.defineComponent({...q,props:{data:{default:()=>[]},itemSize:{default:0},buffer:{default:0},keyName:{default:""}},setup(l,{expose:o}){const n=l,t=e.ref(),{_data:a,visibleData:_,startIndex:s,startOffset:i,placeholderHeight:m}=w({props:n,wrapElement:t});o({reset:c,container:t,_data:a});function y(){const d=t.value.scrollTop;s.value=V(a.value,d,"vertical")}function c(){s.value=0,t.value?.scroll({top:0,left:0})}return(d,g)=>(e.openBlock(),e.createElementBlock("div",{class:"virtual-list-wrap",ref_key:"wrap",ref:t,onScroll:e.withModifiers(y,["prevent","stop"])},[e.createElementVNode("div",{class:"virtual-list-placeholder",style:e.normalizeStyle({height:e.unref(m)+"px"})},null,4),e.createElementVNode("div",{class:"virtual-list-container",style:e.normalizeStyle({transform:`translate3d(0,${e.unref(i)}px,0)`})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(_),f=>(e.openBlock(),e.createElementBlock("div",{class:"virtual-item",_id:f.__index,key:f[n.keyName]},[e.renderSlot(d.$slots,"default",{slotScope:f},void 0,!0)],8,P))),128))],4)],40,D))}}),X="",F=b(A,[["__scopeId","data-v-b8bf7bb9"]]),C=S(j),E=S(F),R=Object.freeze(Object.defineProperty({__proto__:null,SuButton:B,horizonetalVirtualList:C,verticalVirtualList:E},Symbol.toStringTag,{value:"Module"})),U=l=>{Object.values(R).forEach(o=>l.use(o))};u.SuButton=B,u.default=U,u.horizonetalVirtualList=C,u.verticalVirtualList=E,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
