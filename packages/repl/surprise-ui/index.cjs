"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");const N=["data-type","data-plain","disabled"],$=e.defineComponent({name:"su-button"}),M=e.defineComponent({...$,props:{type:{default:""},customStyle:{},label:{},disabled:{type:Boolean,default:!1},plain:{type:Boolean,default:!1},round:{type:Boolean,default:!1}},emits:["onClick"],setup(l,{emit:o}){return(a,t)=>(e.openBlock(),e.createElementBlock("button",{class:e.normalizeClass(["su-button",{round:a.round}]),"data-type":a.type,"data-plain":a.plain,style:e.normalizeStyle(a.customStyle),onClick:t[0]||(t[0]=n=>o("onClick")),disabled:a.disabled},[e.renderSlot(a.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(a.label),1)],!0)],14,N))}});const g=(l,o)=>{const a=l.__vccOpts||l;for(const[t,n]of o)a[t]=n;return a},I=g(M,[["__scopeId","data-v-3805931b"]]),z=l=>(l.install=o=>{const a=l.name;a&&o.component(a,l)},l),w=z(I);function C({props:l,wrapElement:o,mode:a="vertical"}){const t=e.ref([]),n=a=="vertical"?{startKey:"__top",endKey:"__bottom",attrName:"height"}:{startKey:"__left",endKey:"__right",attrName:"width"},d=e.computed(()=>t.value[t.value.length-1]&&t.value[t.value.length-1][n.endKey]),u=e.computed(()=>{const r=o.value?.[a==="vertical"?"clientHeight":"clientWidth"]??0;return Math.ceil(r/l.itemSize)}),i=e.computed(()=>Math.min(s.value,Math.round(l.buffer*u.value))),f=e.computed(()=>Math.min(t.value.length-c.value,Math.round(l.buffer*u.value))),p=e.computed(()=>{const r=s.value-i.value,v=c.value+f.value;return t.value.slice(r,v+1)}),s=e.ref(0),c=e.computed(()=>s.value+u.value),h=e.computed(()=>{if(s.value>=1){const r=t.value[s.value][n.startKey]-(t.value[s.value-i.value]?t.value[s.value-i.value][n.startKey]:0);return t.value[s.value-1][n.endKey]-r}else return 0});e.watchEffect(()=>{t.value=l.data?.length?l.data.map((r,v)=>({...r,..._(+v)})):[]}),e.onUpdated(()=>{const r=o.value?.querySelectorAll(".virtual-list-container > .virtual-item");r!==void 0&&e.nextTick(()=>{for(let v=0;v<r.length;v++){const k=r[v],B=k.getBoundingClientRect(),m=+k.getAttribute("_id"),K=t.value[m].__size,b=K-B[n.attrName];if(b){t.value[m].__size=B[n.attrName],t.value[m][n.endKey]=t.value[m][n.endKey]-b;for(let y=m+1;y<t.value.length;y++){const S=t.value[y];S[n.startKey]=t.value[y-1][n.endKey],S[n.endKey]=S[n.endKey]-b}}}})});function _(r){return a==="vertical"?{__size:l.itemSize,__bottom:(r+1)*l.itemSize,__top:r*l.itemSize,__index:r}:{__size:l.itemSize,__right:(r+1)*l.itemSize,__left:r*l.itemSize,__index:r}}return{_data:t,placeholderHeight:d,visibleCount:u,visibleData:p,startIndex:s,endIndex:c,startOffset:h}}function V(l,o,a){let t=0,n=l.length-1,d=null;const u=a==="vertical"?"__bottom":"__right";for(;t<=n;){const i=t+(n-t>>1);if(l[i][u]>o)(d===null||d>i)&&(d=i),n=i-1;else if(l[i][u]<o)t=i+1;else if(l[i][u]===o)return l[i].__index+1}return d}const L=["onScroll"],O=["_id"],H=e.defineComponent({name:"horizonetal-virtual-list"}),T=e.defineComponent({...H,props:{data:{default:()=>[]},itemSize:{default:0},buffer:{default:0},keyName:{default:""}},setup(l,{expose:o}){const a=l,t=e.ref(),{_data:n,visibleData:d,startIndex:u,startOffset:i,placeholderHeight:f}=C({props:a,wrapElement:t,mode:"horizontal"});o({reset:s,container:t,_data:n});function p(){const c=t.value.scrollLeft;u.value=V(n.value,c,"horizonetal")}function s(){u.value=0,t.value?.scroll({top:0,left:0})}return(c,h)=>(e.openBlock(),e.createElementBlock("div",{class:"virtual-list-wrap",ref_key:"wrap",ref:t,onScroll:e.withModifiers(p,["prevent","stop"])},[e.createElementVNode("div",{class:"virtual-list-placeholder",style:e.normalizeStyle({width:e.unref(f)+"px"})},null,4),e.createElementVNode("div",{class:"virtual-list-container",style:e.normalizeStyle({transform:`translate3d(${e.unref(i)}px,0,0)`})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),_=>(e.openBlock(),e.createElementBlock("div",{class:"virtual-item",_id:_.__index,key:_[a.keyName]},[e.renderSlot(c.$slots,"default",{slotScope:_},void 0,!0)],8,O))),128))],4)],40,L))}});const j=g(T,[["__scopeId","data-v-a7541527"]]),D=["onScroll"],P=["_id"],q=e.defineComponent({name:"vertical-virtual-list"}),A=e.defineComponent({...q,props:{data:{default:()=>[]},itemSize:{default:0},buffer:{default:0},keyName:{default:""}},setup(l,{expose:o}){const a=l,t=e.ref(),{_data:n,visibleData:d,startIndex:u,startOffset:i,placeholderHeight:f}=C({props:a,wrapElement:t});o({reset:s,container:t,_data:n});function p(){const c=t.value.scrollTop;u.value=V(n.value,c,"vertical")}function s(){u.value=0,t.value?.scroll({top:0,left:0})}return(c,h)=>(e.openBlock(),e.createElementBlock("div",{class:"virtual-list-wrap",ref_key:"wrap",ref:t,onScroll:e.withModifiers(p,["prevent","stop"])},[e.createElementVNode("div",{class:"virtual-list-placeholder",style:e.normalizeStyle({height:e.unref(f)+"px"})},null,4),e.createElementVNode("div",{class:"virtual-list-container",style:e.normalizeStyle({transform:`translate3d(0,${e.unref(i)}px,0)`})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),_=>(e.openBlock(),e.createElementBlock("div",{class:"virtual-item",_id:_.__index,key:_[a.keyName]},[e.renderSlot(c.$slots,"default",{slotScope:_},void 0,!0)],8,P))),128))],4)],40,D))}});const F=g(A,[["__scopeId","data-v-b8bf7bb9"]]),x=z(j),E=z(F),R=Object.freeze(Object.defineProperty({__proto__:null,SuButton:w,horizonetalVirtualList:x,verticalVirtualList:E},Symbol.toStringTag,{value:"Module"})),U=l=>{Object.values(R).forEach(o=>l.use(o))};exports.SuButton=w;exports.default=U;exports.horizonetalVirtualList=x;exports.verticalVirtualList=E;
